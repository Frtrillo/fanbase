<!DOCTYPE html>
<html>

<body>

  <canvas id="myCanvas" width="960" height="495" style="border:1px solid #d3d3d3;">
    Your browser does not support the HTML5 canvas tag.</canvas>

  <script>
    var c = document.getElementById("myCanvas");
    var pokecoins = 0;
    var img = new Image();
    var ctx = c.getContext("2d");
    var posXball = c.width / 1.7;
    var posYball = 100;
    var posXmeowth=160;
    var posYmeowth=130;
    var posXpersian=140;
    var posYpersian=215;
    var mejora1=0;
    var mejora2=0;
    var preciomejora1=20;
    var preciomejora2=80;
    var pokeclick=1+mejora1+mejora2;
    var imgmeowth = new Image();
    var imgpersian = new Image();
    var centromejora="centeractu1.jpg";

    
    function dibujaJuego() {
      //Dibujamos fondo
      var background = new Image();
      background.src = "assets/img/pkmclicker/"+centromejora+"";
      background.onload = function () {
        ctx.drawImage(background, 0, 0);

        // Dibujamos cuadrado derecha logo
        ctx.fillStyle = "rgb(11, 16, 34)";
        ctx.fillRect(c.width-300, 0, 300, 55);

        //Pintamos logos
        ctx.font = "15px Roboto";
        ctx.fillStyle = "rgb(24,161,156)";
        ctx.fillText("Francisco Trillo's Fanbase", 670, 20);

        // Creamos el gradient para el logo
        var gradient = ctx.createLinearGradient(0, 0, c.width, 0);
        gradient.addColorStop("0", "yellow");
        gradient.addColorStop("0.4", "yellow");
        gradient.addColorStop("1", "pink");
        ctx.font = "30px Raleway";
        ctx.strokeStyle = gradient;
        ctx.strokeText("Pokemon Clicker", 680, 45);


        //Cuadrado monedas
        ctx.fillStyle = "rgb(24,161,156)";
        ctx.fillRect(0, 0, 285, 55);
        ctx.font = "20px Raleway";
        ctx.strokeText("PokeCoins:", 10, 35);
        ctx.strokeText(pokecoins, 130, 35);
        
        //Cuadrado compras
        ctx.fillStyle = "rgb(11, 16, 34)";
        ctx.fillRect(0, 70, 510, 455);
        ctx.fillStyle = "rgb(24,161,156)";

        var gradient = ctx.createLinearGradient(0, 0, c.width, 0);
        gradient.addColorStop("0", "red");
        gradient.addColorStop("0.4", "blue");
        gradient.addColorStop("1", "pink");
        ctx.font = "50px Raleway";
        ctx.strokeStyle = gradient;
        ctx.strokeText("Mejoras", 10, 110);
        ctx.font = "30px Raleway";
        ctx.strokeText("-> MEJORAR CENTRO <-", 45, 460);

        //Boton comprar meowth y persian
        ctx.font = "17px Roboto";
        ctx.fillStyle = "rgb(24,161,156)";
        ctx.fillText("Meowth ("+preciomejora1+" PC)", 10, 180);
        ctx.fillText("MEJORA POR -> ("+mejora1+")", 260, 180);
        ctx.fillText("Persian ("+preciomejora2+" PC)", 10, 280);
        ctx.fillText("MEJORA POR -> ("+mejora2+")", 260, 280);
        ctx.fillText("- Meowth mejora los clicks con un extra de +1", 10, 340);
        ctx.fillText("- Persian mejora los clicks con un extra de +3", 10, 360);
        ctx.fillText("- El Centro Pokémon multiplica tus mejoras un X0.5", 10, 380);
        ctx.fillText("y el coste de las mejoras X4", 20, 400);

      }

      var pcoins = new Image();
      pcoins.onload = function () {
        ctx.drawImage(pcoins, 250, 15,30,30);
      };
      pcoins.src = "assets/img/pkmclicker/pokecoins-pinterest.png";

      var pshop = new Image();
      pshop.onload = function () {
        ctx.drawImage(pshop, 280, 55,60,60);
      };
      pshop.src = "assets/img/pkmclicker/pokeshop.png";

      imgmeowth.onload = function () {
        ctx.drawImage(imgmeowth, posXmeowth, posYmeowth);
      };
      imgmeowth.src = "assets/img/pkmclicker/meowth.png";

      imgpersian.onload = function () {
        ctx.drawImage(imgpersian, posXpersian, posYpersian,120,100);
      };
      imgpersian.src = "assets/img/pkmclicker/persian.png";

      img.onload = function () {
        ctx.drawImage(img, posXball, posYball);
      };
      img.src = "assets/img/pkmclicker/pokeball.png";

    }
    dibujaJuego();

    //Detectar clicks
    c.addEventListener('click', function (event) {
      var x = event.pageX,
        y = event.pageY;

      // Click pokeball
      if (x > posXball && x < img.width + posXball && y > posYball && y < img.height + posYball) {
        pokecoins+=pokeclick;
        ctx.clearRect(0, 0, c.width, c.height); // borramos canvas
        ctx.strokeText(pokecoins, 130, 35);
        dibujaJuego();
      }

      // Click mejora centro
      if (x > 45 && x < 450 && y > 440) {
        alert("¡ Enhorabuena ! Centro Pokémon mejorado");
        centromejora="centeractu2.jpg";
        ctx.clearRect(0, 0, c.width, c.height); // borramos canvas
        preciomejora1+=preciomejora1*4;
        preciomejora2+=preciomejora2*4;
        dibujaJuego();
      }

      // Click meowth
      if (x > posXmeowth && x < imgmeowth.width + posXmeowth && y > posYmeowth && y < imgmeowth.height + posYmeowth) {
        if(pokecoins-preciomejora1<0){
          alert("No tienes suficiente dinero");
        }else{
          pokecoins-=preciomejora1;
          mejora1++;
          preciomejora1=preciomejora1+10;
          pokeclick=1+mejora1+mejora2;
          ctx.clearRect(0, 0, c.width, c.height); // borramos canvas
          ctx.strokeText(pokecoins, 130, 35);
          dibujaJuego();
        }

      }
      // Click persian
      if (x > posXpersian && x < imgpersian.width + posXpersian && y > posYpersian && y < imgpersian.height + posYpersian) {
        if(pokecoins-preciomejora2<0){
        }else{
          pokecoins-=preciomejora2;
          mejora2+=3;
          preciomejora2=preciomejora2+30;
          pokeclick=1+mejora1+mejora2;
          ctx.clearRect(0, 0, c.width, c.height); // borramos canvas
          ctx.strokeText(pokecoins, 130, 35);
          dibujaJuego();
        }
        
      }
    });


  </script>


</body>

</html>